const e=[];chrome.runtime.onInstalled.addListener((()=>{chrome.contextMenus.create({id:"analyzeImage",title:"Describe Image",contexts:["image"]})})),chrome.contextMenus.onClicked.addListener(((e,t)=>{"analyzeImage"===e.menuItemId&&chrome.tabs.sendMessage(t.id,{action:"analyzeImage",url:e.srcUrl})})),chrome.runtime.onMessage.addListener(((e,t,a)=>{if("fetchImage"===e.action)return fetch(e.url).then((e=>e.blob())).then((e=>{const t=new FileReader;t.onloadend=()=>{const n=t.result.split(",")[1];a({base64:n,type:e.type})},t.readAsDataURL(e)})).catch((e=>a({error:e.message}))),!0}));